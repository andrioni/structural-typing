<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>structural-typing.type documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Structural-typing 0.4.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>structural-typing</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></div></li><li class="depth-3 branch"><a href="structural-typing.api.defaults.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>defaults</span></div></a></li><li class="depth-3 branch"><a href="structural-typing.api.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-3 branch"><a href="structural-typing.api.predicates.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>predicates</span></div></a></li><li class="depth-3"><a href="structural-typing.api.type-repo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>type-repo</span></div></a></li><li class="depth-2 branch"><a href="structural-typing.global-type.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>global-type</span></div></a></li><li class="depth-2 branch"><a href="structural-typing.oopsie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oopsie</span></div></a></li><li class="depth-2 current"><a href="structural-typing.type.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>type</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="structural-typing.type.html#var-ALL"><div class="inner"><span>ALL</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-checked"><div class="inner"><span>checked</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-default-error-handler"><div class="inner"><span>default-error-handler</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-default-success-handler"><div class="inner"><span>default-success-handler</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-described-by.3F"><div class="inner"><span>described-by?</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-empty-type-repo"><div class="inner"><span>empty-type-repo</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-explain-with"><div class="inner"><span>explain-with</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-includes"><div class="inner"><span>includes</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-member"><div class="inner"><span>member</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-named"><div class="inner"><span>named</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-replace-error-handler"><div class="inner"><span>replace-error-handler</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-replace-success-handler"><div class="inner"><span>replace-success-handler</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-required-key"><div class="inner"><span>required-key</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-required-paths"><div class="inner"><span>required-paths</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-show-as"><div class="inner"><span>show-as</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-throwing-error-handler"><div class="inner"><span>throwing-error-handler</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">structural-typing.type</h2><div class="doc"><div class="markdown"><p>Structural types, loosely inspired by Elm&rsquo;s way of looking at <a href="http://elm-lang.org/learn/Records.elm">records</a>.</p></div></div><div class="public anchor" id="var-ALL"><h3>ALL</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Use this in a path to select all values of a collection.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/path.clj#L9">view source</a></div></div><div class="public anchor" id="var-checked"><h3>checked</h3><div class="usage"><code>(checked type-repo type-signifier candidate)</code><code>(checked type-signifier candidate)</code></div><div class="doc"><div class="markdown"><p>Check the map <code>candidate</code> against the previously-defined type named by <code>type-signifier</code> in the given <code>type-repo</code>. If the <code>type-repo</code> is omitted, the global one is used.</p>
<pre><code> (type/checked :Point {:x 1 :y 2})
</code></pre><p>To check if a candidate matches all of a set of types, wrap them in a vector:</p>
<pre><code> (type/checked [:Colorful :Point] {:x 1, :y 2, :color &quot;red&quot;})
</code></pre><p>Types are defined with <a href="structural-typing.type.html#var-named">named</a> or <a href="null">named!</a>. By default, <code>checked</code> returns  the <code>candidate</code> argument if it checks out, <code>nil</code> otherwise. Those defaults can be  changed.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L34">view source</a></div></div><div class="public anchor" id="var-default-error-handler"><h3>default-error-handler</h3><div class="usage"><code>(default-error-handler oopsies)</code></div><div class="doc"><div class="markdown"><p>This error handler takes the output of type checking (a sequence of &ldquo;oopsies&rdquo;) and prints each one&rsquo;s explanation on a separate line. It returns <code>nil</code>, allowing constructs like this:</p>
<pre><code> (some-&gt; (type/checked :frobnoz x)
         (assoc :goodness true)
         ...)
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/defaults.clj#L83">view source</a></div></div><div class="public anchor" id="var-default-success-handler"><h3>default-success-handler</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>The default success handler just returns the original value passed to <code>checked</code>.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/defaults.clj#L79">view source</a></div></div><div class="public anchor" id="var-described-by.3F"><h3>described-by?</h3><div class="usage"><code>(described-by? type-repo type-signifier candidate)</code><code>(described-by? type-signifier candidate)</code></div><div class="doc"><div class="markdown"><p>Return <code>true</code> iff the map or record <code>candidate</code> typechecks against the type named <code>type-signifier</code> (or vector of signifiers).</p><p>With three arguments, the check is against the <code>type-repo</code>. If <code>type-repo</code> is omitted, the global repo is used.</p>
<pre><code>(type/described-by? :Point candidate)
(type/described-by? [:Colorful :Point] candidate)
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L71">view source</a></div></div><div class="public anchor" id="var-empty-type-repo"><h3>empty-type-repo</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/type_repo.clj#L41">view source</a></div></div><div class="public anchor" id="var-explain-with"><h3>explain-with</h3><div class="usage"><code>(explain-with explainer predicate)</code></div><div class="doc"><div class="markdown"><p>After the <code>predicate</code> fails, the failure will need to be explained. Arrange for the <code>explainer</code> function to be called with the &ldquo;oopsie&rdquo; that results from the failure.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/predicates.clj#L20">view source</a></div></div><div class="public anchor" id="var-includes"><h3>includes</h3><div class="usage"><code>(includes type-key)</code></div><div class="doc"><div class="markdown"><p>During creation of a type by <code>named</code>, this is replaced with the content the type-key refers to. The exact meaning depends on whether it&rsquo;s used in a path, as the value of a path, or as an entire argument itself. See the wiki documentation.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/path.clj#L20">view source</a></div></div><div class="public anchor" id="var-member"><h3>member</h3><div class="usage"><code>(member &amp; args)</code></div><div class="doc"><div class="markdown"><p>Produce a predicate that&rsquo;s false when applied to a value not a member of <code>args</code>. The explainer associated with <code>member</code> prints those <code>args</code>.</p>
<pre><code>  ( (member 2 3 5 7) 4) =&gt; false
  (type! :small-primes {:n (member 2 3 5 7)})
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/predicates.clj#L45">view source</a></div></div><div class="public anchor" id="var-named"><h3>named</h3><div class="usage"><code>(named type-repo type-signifier &amp; type-descriptions)</code></div><div class="doc"><div class="markdown"><p>Define the type <code>type-signifier</code> as being a map or record containing all of the  given <code>type-descriptions</code> (which may a vector of required keys or paths  or a (potentially nested) map from keys/paths to predicates or vectors of predicates.</p><p>Returns the augmented <code>type-repo</code>. See also <a href="null">named!</a>.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L60">view source</a></div></div><div class="public anchor" id="var-replace-error-handler"><h3>replace-error-handler</h3><div class="usage"><code>(replace-error-handler self handler)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L13">view source</a></div></div><div class="public anchor" id="var-replace-success-handler"><h3>replace-success-handler</h3><div class="usage"><code>(replace-success-handler self handler)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L13">view source</a></div></div><div class="public anchor" id="var-required-key"><h3>required-key</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>False iff a key/path does not exist or has value <code>nil</code>. This is the only predicate that is not considered optional.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/predicates.clj#L37">view source</a></div></div><div class="public anchor" id="var-required-paths"><h3>required-paths</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Used to create an argument to <code>named</code>. All of the elements are keys or paths that are required (as with <code>[required-key</code>) to be present in any matching candidate. This is exactly the same thing as putting the arguments in a vector.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L87">view source</a></div></div><div class="public anchor" id="var-show-as"><h3>show-as</h3><div class="usage"><code>(show-as name predicate)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/predicates.clj#L8">view source</a></div></div><div class="public anchor" id="var-throwing-error-handler"><h3>throwing-error-handler</h3><div class="usage"><code>(throwing-error-handler oopsies)</code></div><div class="doc"><div class="markdown"><p>In contrast to the default error handler, this one throws a <code>java.lang.Exception</code> whose message is the concatenation of the type-mismatch messages.</p><p>To make all type mismatches throw failures, do this:</p>
<pre><code>   (type/set-error-handler! type/throwing-failure-handler)
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/api/defaults.clj#L97">view source</a></div></div></div></body></html>