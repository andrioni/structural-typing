<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>structural-typing.type documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Structural-typing 0.2.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>structural-typing</span></div></div></li><li class="depth-2 branch"><a href="structural-typing.global-type.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>global-type</span></div></a></li><li class="depth-2 branch"><a href="structural-typing.pipeline-stages.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline-stages</span></div></a></li><li class="depth-2 branch current"><a href="structural-typing.type.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>type</span></div></a></li><li class="depth-2"><a href="structural-typing.validators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validators</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="structural-typing.type.html#var-checked"><div class="inner"><span>checked</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-coerce"><div class="inner"><span>coerce</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-coercion"><div class="inner"><span>coercion</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-empty-type-repo"><div class="inner"><span>empty-type-repo</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-instance.3F"><div class="inner"><span>instance?</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-named"><div class="inner"><span>named</span></div></a></li><li class="depth-1"><a href="structural-typing.type.html#var-optional"><div class="inner"><span>optional</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">structural-typing.type</h2><div class="doc"><div class="markdown"><p>Structural types, loosely inspired by Elm&rsquo;s way of looking at <a href="http://elm-lang.org/learn/Records.elm">records</a>. Builds on top of <a href="https://github.com/leonardoborges/bouncer">Bouncer</a>.</p></div></div><div class="public anchor" id="var-checked"><h3>checked</h3><div class="usage"><code>(checked type-repo name kvs)</code><code>(checked name kvs)</code></div><div class="doc"><div class="markdown"><p>Check the map <code>kvs</code> against the previously-defined type <code>name</code> in the given <code>type-repo</code>. If the <code>type-repo</code> is omitted, the global one is used.</p>
<pre><code>(type/checked :frobbish {:twerk true, :tweek false})
</code></pre><p>Types are defined with <a href="structural-typing.type.html#var-named">named</a> or <a href="structural-typing.global-type.html#var-named.21">named!</a>. By default, <code>checked</code> returns the <code>kvs</code> argument if it checks out, <code>nil</code> otherwise. Those defaults can be changed.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L95">view source</a></div></div><div class="public anchor" id="var-coerce"><h3>coerce</h3><div class="usage"><code>(coerce type-repo name kvs)</code><code>(coerce name kvs)</code></div><div class="doc"><div class="markdown"><p>Coerce the map or record <code>kvs</code> into the type named <code>name</code> in the <code>type-repo</code> and check the result with <a href="structural-typing.type.html#var-checked">checked</a>. The coerced version of <code>kvs</code> is returned.</p><p>If the type repo is omitted, the global type repo is used. Coercions are defined with <a href="structural-typing.type.html#var-coercion">coercion</a> or <a href="structural-typing.global-type.html#var-coercion.21">coercion!</a>.</p>
<pre><code> (some-&gt; (coerce :user-v2 legacy-json)
         (update-in [:stats :logins] inc))
</code></pre><p>If <code>name</code> hasn&rsquo;t been defined (via <a href="null">name</a> or <a href="structural-typing.global-type.html#var-named.21">named!</a>), the final call to <code>checked</code> is omitted.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L134">view source</a></div></div><div class="public anchor" id="var-coercion"><h3>coercion</h3><div class="usage"><code>(coercion type-repo name f)</code></div><div class="doc"><div class="markdown"><p>Register function <code>f</code> as one that can coerce a map or record into one that matches type <code>name</code>. The updated <code>type-repo</code> is returned. See also <a href="structural-typing.global-type.html#var-coercion.21">coercion!</a>, which updates the global type repo.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L126">view source</a></div></div><div class="public anchor" id="var-empty-type-repo"><h3>empty-type-repo</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A repository that contains no type descriptions. It contains default behavior for both success and failure cases. Here&rsquo;s an example of changing the behavior and adding a type:</p>
<pre><code>  (-&gt; type/empty-type-repo
      (assoc :failure-handler type/throwing-failure-handler)
      (type/named :frobable [:left :right :arrow]))
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L10">view source</a></div></div><div class="public anchor" id="var-instance.3F"><h3>instance?</h3><div class="usage"><code>(instance? type-repo name kvs)</code><code>(instance? name kvs)</code></div><div class="doc"><div class="markdown"><p>Return <code>true</code> iff the map or record <code>kvs</code> typechecks against the type named <code>name</code> in <code>type-repo</code>. If <code>type-repo</code> is omitted, the global repo is used.</p>
<pre><code>(type/instance? :frobbable kvs)
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L111">view source</a></div></div><div class="public anchor" id="var-named"><h3>named</h3><div class="usage"><code>(named type-repo name keys bouncer-map)</code><code>(named type-repo name keys)</code></div><div class="doc"><div class="markdown"><p>Define the type <code>name</code> as being a map or record containing all of the given <code>keys</code>. Returns the augmented <code>type-repo</code>. See also <a href="structural-typing.global-type.html#var-named.21">named!</a>.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L66">view source</a></div></div><div class="public anchor" id="var-optional"><h3>optional</h3><div class="usage"><code>(optional &amp; fns)</code></div><div class="doc"><div class="markdown"><p>Construct a function that takes a single value.</p>
<ul>
  <li>If that value is <code>nil</code>, the result is <code>true</code>.</li>
  <li>Otherwise, if the value causes all of the <code>fns</code> to return a truthy value, the result is <code>true</code>.</li>
  <li><p>Otherwise, the result is <code>false</code>.</p><p>( (type/optional number? even?) nil) =&gt; true ( (type/optional number? even?) &rsquo;a) =&gt; false ; note evaluation short-circuits. ( (type/optional number? even?) 1) =&gt; false ( (type/optional number? even?) 2) =&gt; true</p></li>
</ul></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/type.clj#L76">view source</a></div></div></div></body></html>